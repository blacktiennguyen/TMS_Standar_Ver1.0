
@{
    Layout = "~/Views/Shared/_TSMMasterLayout.cshtml";
}


@*<a onclick="reloadheader();">reload</a>*@

<style>
    .textcotentnowrap {
        /* overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;*/
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        line-height: 16px; /* fallback */
        max-height: 32px; /* fallback */
        -webkit-line-clamp: 1; /* number of lines to show */
        -webkit-box-orient: vertical;
    }
</style>

<!-- Small boxes (Stat box) -->
<div class="row">

    @*<div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-aqua">
            <div class="inner">
                <h3 id="lblRemainOrderRequestApproved_home">0</h3>
                <p>Đơn hàng CN chờ duyệt</p>
            </div>
            <div class="icon">
                <i class="ion ion-bag"></i>
            </div>
            <a href="../../ApproveHistory/List" class="small-box-footer">Duyệt đơn hàng <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->
    <script>
        LoadRemainOrderRequestForApprove();
        function LoadRemainOrderRequestForApprove() {
            var paramValue = JSON.stringify({
                Type: '1'
            });
        $.ajax({
            url: '../../MasterData/LoadRemainOrderRequestForApprove',
            type: 'POST',
            dataType: 'json',
            data: paramValue,
            contentType: 'application/json; charset=utf-8',
            beforeSend: function () {
            },
            success: function (result) {
                var html = '';
                if (result.mess == '1') {
                    $('#lblRemainOrderRequestApproved_home').html(result.data.NumberOrder);
                }
                else {
                    $('#lblRemainOrderRequestApproved_home').html('0');
                }
            },
            error: function (msg) {
                $('#lblRemainOrderRequestApproved_home').html('Lỗi');
            },
        })
    }
    </script>*@

    @*<div id="parent_lblRemainstockoutRequestApproved_home" class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-aqua">
            <div class="inner">
                <h3 id="lblRemainstockoutRequestApproved_home">0</h3>
                <p>Phiếu XBHO chờ duyệt</p>
            </div>
            <div class="icon">
                <i class="ion ion-stats-bars"></i>
            </div>
            <a href="../../StockoutRequest/List" class="small-box-footer">Duyệt XBHO <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->

    <script>
    LoadRemainStockoutRequestForApprove();
    function LoadRemainStockoutRequestForApprove() {
        var paramValue = JSON.stringify({
            Type: '6'
        });
        $.ajax({
            url: '../../MasterData/LoadRemainOrderRequestForApprove',
            type: 'POST',
            dataType: 'json',
            data: paramValue,
            contentType: 'application/json; charset=utf-8',
            beforeSend: function () {
            },
            success: function (result) {
                var html = '';
                if (result.mess == '1') {
                    $('#lblRemainstockoutRequestApproved_home').html(result.data.NumberOrder);
                }
                else {
                    $('#parent_lblRemainstockoutRequestApproved_home').hide();
                }
            },
            error: function (msg) {
                $('#lblRemainstockoutRequestApproved_home').html('Lỗi');
            },
        })
    }
    </script>*@

    @*<div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-aqua">
            <div class="inner">
                <h3 id="lblremaindeliveryguideforapprove_home">0</h3>
                <p>HDGH chờ duyệt</p>
            </div>
            <div class="icon">
                <i class="ion ion-person-add"></i>
            </div>
            <a href="../../DeliveryGuideHistory" class="small-box-footer">Duyệt HDGH <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->
    <script>
    LoadRemainDeliveryguideForApprove();
    function LoadRemainDeliveryguideForApprove() {
        var paramValue = JSON.stringify({
            Type: '4'
        });
        $.ajax({
            url: '../../MasterData/LoadRemainOrderRequestForApprove',
            type: 'POST',
            dataType: 'json',
            data: paramValue,
            contentType: 'application/json; charset=utf-8',
            beforeSend: function () {
            },
            success: function (result) {
                var html = '';
                if (result.mess == '1') {
                    $('#lblremaindeliveryguideforapprove_home').html(result.data.NumberOrder);
                }
                else {
                    $('#lblremaindeliveryguideforapprove_home').html('0');
                }
            },
            error: function (msg) {
                $('#lblremaindeliveryguideforapprove_home').html('Lỗi');
            },
        })
    }
    </script>*@


    @*<div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-yellow">
            <div class="inner">
                <h3 id="lblRecentStockOutrequestForConfirmreceiveItem_home">0</h3>
                <p>Chưa Xác nhận nhập kho</p>
            </div>
            <div class="icon">
                <i class="ion ion-person-add"></i>
            </div>
            <a style="cursor:pointer" onclick="btnCreateItemConfirmRecieItem_home()" class="small-box-footer">Tạo xác nhận nhập kho <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->
    <script>
    loadRecentStockOutrequestForConfirmreceiveItem();
    function loadRecentStockOutrequestForConfirmreceiveItem() {
        $.ajax({
            url: '../../MasterData/loadRecentStockOutrequestForConfirmreceiveItem',
            type: 'POST',
            dataType: 'json',
            data: '',
            contentType: 'application/json; charset=utf-8',
            beforeSend: function () {
            },
            success: function (result) {
                var html = '';
                if (result.mess == '1') {
                    $('#lblRecentStockOutrequestForConfirmreceiveItem_home').html(result.data);
                }
                else {
                    $('#lblRecentStockOutrequestForConfirmreceiveItem_home').html('0');
                }
            },
            error: function (msg) {
                $('#lblRecentStockOutrequestForConfirmreceiveItem_home').html('Lỗi');
            },
        })
    }
    function btnCreateItemConfirmRecieItem_home() {
        loadpopup('../../ConfirmReceiptItem/Detail/', 'Xác nhận hàng nhập kho', '100%', true);
    }
    </script>*@

    <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-red">
            <div class="inner">
                <h3 id="lblRemainOrderRequestForCancel_home">0</h3>
                <p>Đơn hàng chờ hủy</p>
            </div>
            <div class="icon">
                <i class="ion ion-pie-graph"></i>
            </div>
            <a href="../../OrderRequest/CancelOrderRequestList" class="small-box-footer">Xem chi tiết <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->
    @*<script>
    LoadRemainOrderRequestForCancel();
    function LoadRemainOrderRequestForCancel() {
        var paramValue = JSON.stringify({
            Type: '2'
        });
        $.ajax({
            url: '../../MasterData/LoadRemainOrderRequestForApprove',
            type: 'POST',
            dataType: 'json',
            data: paramValue,
            contentType: 'application/json; charset=utf-8',
            beforeSend: function () {
            },
            success: function (result) {
                var html = '';
                if (result.mess == '1') {
                    $('#lblRemainOrderRequestForCancel_home').html(result.data.NumberOrder);
                }
                else {
                    $('#lblRemainOrderRequestForCancel_home').html('0');
                }
            },
            error: function (msg) {
                $('#lblRemainOrderRequestForCancel_home').html('Lỗi');
            },
        })
    }
    </script>*@

</div><!-- /.row -->


<div class="row">
    <div class="col-md-8">

        <!-- TABLE: LATEST ORDERS -->
        <div class="box box-info">
            <div class="box-header with-border">
                <h3 class="box-title">Đơn hàng chi nhánh gần đây</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div><!-- /.box-header -->
            <div class="box-body">
                <div class="table-responsive">
                    <table id="tblRecentOrderRequest_home" class="table no-margin">
                        <thead>
                            <tr>
                                <th style="width:25%">Số đơn hàng</th>
                                <th style="width:45%">Trạng thái</th>
                                <th style="width:15%">Giá trị (VND)</th>
                                <th style="width:15%">Ngày</th>
                            </tr>
                        </thead>
                        <tbody>
                          
                        </tbody>
                    </table>
                </div><!-- /.table-responsive -->
            </div><!-- /.box-body -->

            <div class="box-footer clearfix">
                <a onclick="btnCreateOrderRequestOnClick_home()" style="cursor:pointer" class="btn btn-sm btn-info btn-flat pull-left">Tạo đơn hàng mới</a>
                <a href="../../OrderRequest/List" class="btn btn-sm btn-default btn-flat pull-right">Xem tất cả đơn hàng</a>
            </div><!-- /.box-footer -->
        </div><!-- /.box -->

        @*<script>
            function btnCreateOrderRequestOnClick_home() {
                loadpopup('../../OrderRequest/Detail/', 'Tạo đơn hàng chi nhánh', '100%', true);
            }
            loadRecentOrderRequest_home();
            function loadRecentOrderRequest_home()
            {
                $.ajax({
                    url: '../../OrderRequest/loadRecentOrderRequest',
                    type: 'POST',
                    dataType: 'json',
                    data: '',
                    contentType: 'application/json; charset=utf-8',
                    beforeSend: function () {
                        //$("tbody", $('#tblRecentOrderRequest_home')).remove();
                    },
                    success: function (result) {
                        var html = '';
                        if (result.mess == '1') {
                            for (var i = 0; i < result.data.length ; i++) {
                                html = html + '<tr >'
                                               + ' <td style="width:25%;"><a title="' + result.data[i].BranchName + '" style="cursor:pointer" onclick="OpenPopupOrderRequestDetail(\'' + result.data[i].OrderRequestCode + '\')" >' + result.data[i].OrderRequestCode + '</a></td>'
                                               + '<td style="width:45%;"><span class="textcotentnowrap">' + result.data[i].Status + '</span></td>'
                                               + ' <td style="width:15%"><span class="label label-success formatnumber" style="white-space: nowrap;">' + result.data[i].TotalAmount + '</span></td>'
                                               + ' <td style="width:15%"><div class="sparkbar" data-color="#00a65a" data-height="20">' + result.data[i].RequestDate + '</div></td>'
                                               + ' </tr>';
                            }
                            // $('#tblRecentOrderRequest_home').empty();

                            $("#tblRecentOrderRequest_home tbody").html(html);
                            $('.formatnumber').autoNumeric('init');
                        }
                        else {
                            $("#tblRecentOrderRequest_home tbody").html('<tr>Chưa có đơn hàng nào</tr>');
                        }

                    },
                    error: function (msg) {
                        $("#tblRecentOrderRequest_home tbody").html('<tr>Không thể kết nối đến máy chủ</tr>');
                    },

                })

            }
            function OpenPopupOrderRequestDetail(OrderRequestCode) {
                loadpopup('../../OrderRequest/Detail?OrderRequestCode=' + OrderRequestCode, 'Thông tin chi tiết đơn hàng chi nhánh', '80%', true);
            }
        </script>*@

    </div>
    <div class="col-md-4">
  
        <div class="info-box">
            <!-- small box -->
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3 id="lblRemainOrderRequestApproved_home">0</h3>
                    <p>Đơn hàng CN chờ duyệt</p>
                </div>
                <div class="icon">
                    <i class="ion ion-bag"></i>
                </div>
                <a href="../../ApproveHistory/List" class="small-box-footer">Duyệt đơn hàng <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div><!-- ./col -->
        @*<script>
            LoadRemainOrderRequestForApprove();
            function LoadRemainOrderRequestForApprove() {
                var paramValue = JSON.stringify({
                    Type: '1'
                });
                $.ajax({
                    url: '../../MasterData/LoadRemainOrderRequestForApprove',
                    type: 'POST',
                    dataType: 'json',
                    data: paramValue,
                    contentType: 'application/json; charset=utf-8',
                    beforeSend: function () {
                    },
                    success: function (result) {
                        var html = '';
                        if (result.mess == '1') {
                            $('#lblRemainOrderRequestApproved_home').html(result.data.NumberOrder);
                        }
                        else {
                            $('#lblRemainOrderRequestApproved_home').html('0');
                        }
                    },
                    error: function (msg) {
                        $('#lblRemainOrderRequestApproved_home').html('Lỗi');
                    },
                })
            }
        </script>*@
  
        <!-- Ton kho cham luan chuyen LIST -->
        <div class="box box-info">
            <div class="box-header with-border">
                <h3 class="box-title">Tồn kho chậm luân chuyển</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div><!-- /.box-header -->
            <div id="tblRecentInventoryslowhistory_home" class="box-body">
               
            </div><!-- /.box-body -->
           
        </div><!-- /.box -->
        @*<script>
            loadRecentInventorySlowImport_home();
            function loadRecentInventorySlowImport_home() {
                $.ajax({
                    url: '../../MasterData/loadRecentInventorySlow',
                    type: 'POST',
                    dataType: 'json',
                    data: '',
                    contentType: 'application/json; charset=utf-8',
                    beforeSend: function () {
                        //$("tbody", $('#tblRecentOrderRequest_home')).remove();
                    },
                    success: function (result) {
                        var html = '';
                        if (result.mess == '1') {
                            for (var i = 0; i < result.data.length ; i++) {
                                html = html + '<li class="item">'
                                                +    '<div>'
                                                + '    <a href="../../Upload/Document/ImportSlowHistory/' + result.data[i].FileName + '" class="product-title">' + result.data[i].LastUpdatedDateTime + ' <span class="label label-success pull-right">Tải về</span></a>'
                                                +        '<span class="product-description">'
                                                +           result.data[i].FileName
                                                +        '</span>'
                                                +    '</div>'
                                                +'</li>';
                            }
                            html = ' <ul class="products-list product-list-in-box">' + html + '</ul>';
                            $("#tblRecentInventoryslowhistory_home").html(html);
                            //$('.formatnumber').autoNumeric('init');
                        }
                        else {
                            $("#tblRecentInventoryslowhistory_home").html('Chưa có tồn kho chậm luân chuyển');
                        }

                    },
                    error: function (msg) {
                        $("#tblRecentInventoryslowhistory_home").html('Không thể kết nối đến máy chủ.');
                    },

                })

            }

        </script>*@
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="box box-info">
            <div class="box-header with-border">
                <h3 class="box-title">Hạn mục đầu tư @DateTime.Now.Year</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div><!-- /.box-header -->
            <div class="box-body">
                <div class="table-responsive">
                    @*@Html.Action("ChartCategories", "Report")*@
                </div>
            </div>
        </div>
    </div>

</div>

